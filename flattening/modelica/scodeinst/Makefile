TEST=../../../rtest -v

TESTFILES=\
arrfunc.mo \
bindings1.mo \
bindings2.mo \
bindings3.mo \
bindings4.mo \
bindings5.mo \
bindings7.mo \
builtinmod2.mo \
BuiltinTime.mo \
ClassAsComponentError.mo \
ComponentAsTypeError.mo \
cond4.mo \
conn1.mo \
conn2.mo \
conn4.mo \
const3.mo \
const13.mo \
DuplicateMod1.mo \
DuplicateMod2.mo \
DuplicateMod3.mo \
DuplicateMod4.mo \
DuplicateMod5.mo \
enum1.mo \
enum2.mo \
enum4.mo \
enum5.mo \
enum7.mo \
eq1.mo \
eq7.mo \
eq10.mo \
extends3.mo \
ih1.mo \
ImportNamed1.mo \
ImportNamed2.mo \
ImportNested1.mo \
ImportQualified1.mo \
inst4.mo \
inst5.mo \
lookup1.mo \
lookup2.mo \
lookup3.mo \
lookup4.mo \
loop2.mo \
mod10.mo \
mod11.mo \
mod1.mo \
mod4.mo \
mod5.mo \
mod6.mo \
mod8.mo \
mod9.mo \
NonexistentRedeclareModifier1.mo \
NonexistentRedeclareModifier2.mo \
ParameterBug.mos \
redeclare13.mo \
redeclare2.mo \
redeclare6.mo \
type2.mo \
usertype1.mo \
usertype2.mo \
usertype3.mo \
usertype4.mo \
usertype5.mo \
usertype6.mo \
ScalableTestSuite.Elementary.SimpleODE.Models.CascadedFirstOrder.mos \
ScalableTestSuite.Thermal.Advection.ScaledExperiments.AdvectionReaction_N_200.mos \
ScalableTestSuite.Elementary.SimpleODE.ScaledExperiments.CascadedFirstOrder_N_100.mos \
ScalableTestSuite.Thermal.Advection.ScaledExperiments.AdvectionReaction_N_3200.mos \
ScalableTestSuite.Elementary.SimpleODE.ScaledExperiments.CascadedFirstOrder_N_12800.mos \
ScalableTestSuite.Thermal.Advection.ScaledExperiments.AdvectionReaction_N_400.mos \
ScalableTestSuite.Elementary.SimpleODE.ScaledExperiments.CascadedFirstOrder_N_1600.mos \
ScalableTestSuite.Thermal.Advection.ScaledExperiments.AdvectionReaction_N_6400.mos \
ScalableTestSuite.Elementary.SimpleODE.ScaledExperiments.CascadedFirstOrder_N_200.mos \
ScalableTestSuite.Thermal.Advection.ScaledExperiments.AdvectionReaction_N_800.mos \
ScalableTestSuite.Elementary.SimpleODE.ScaledExperiments.CascadedFirstOrder_N_25600.mos \
ScalableTestSuite.Thermal.Advection.Verification.SimpleAdvection.mos \
ScalableTestSuite.Elementary.SimpleODE.ScaledExperiments.CascadedFirstOrder_N_3200.mos \
ScalableTestSuite.Thermal.DistrictHeating.Verification.TestSat.mos \
ScalableTestSuite.Elementary.SimpleODE.ScaledExperiments.CascadedFirstOrder_N_400.mos \
ScalableTestSuite.Thermal.HeatConduction.ScaledExperiments.OneDHeatTransferTI_FD_N_10.mos \
ScalableTestSuite.Elementary.SimpleODE.ScaledExperiments.CascadedFirstOrder_N_6400.mos \
ScalableTestSuite.Thermal.HeatConduction.ScaledExperiments.OneDHeatTransferTI_FD_N_1280.mos \
ScalableTestSuite.Elementary.SimpleODE.ScaledExperiments.CascadedFirstOrder_N_800.mos \
ScalableTestSuite.Thermal.HeatConduction.ScaledExperiments.OneDHeatTransferTI_FD_N_160.mos \
ScalableTestSuite.Elementary.WhenEvents.ScaledExperiments.ManyEvents_N_1000.mos \
ScalableTestSuite.Thermal.HeatConduction.ScaledExperiments.OneDHeatTransferTI_FD_N_20.mos \
ScalableTestSuite.Elementary.WhenEvents.ScaledExperiments.ManyEvents_N_2000.mos \
ScalableTestSuite.Thermal.HeatConduction.ScaledExperiments.OneDHeatTransferTI_FD_N_320.mos \
ScalableTestSuite.Elementary.WhenEvents.ScaledExperiments.ManyEvents_N_4000.mos \
ScalableTestSuite.Thermal.HeatConduction.ScaledExperiments.OneDHeatTransferTI_FD_N_40.mos \
ScalableTestSuite.Elementary.WhenEvents.ScaledExperiments.ManyEvents_N_8000.mos \
ScalableTestSuite.Thermal.HeatConduction.ScaledExperiments.OneDHeatTransferTI_FD_N_640.mos \
ScalableTestSuite.Elementary.WhenEvents.ScaledExperiments.ManyEventsManyConditions_N_1000.mos \
ScalableTestSuite.Thermal.HeatConduction.ScaledExperiments.OneDHeatTransferTI_FD_N_80.mos \
ScalableTestSuite.Elementary.WhenEvents.ScaledExperiments.ManyEventsManyConditions_N_2000.mos \
ScalableTestSuite.Thermal.HeatConduction.ScaledExperiments.OneDHeatTransferTT_FD_N_10.mos \
ScalableTestSuite.Elementary.WhenEvents.ScaledExperiments.ManyEventsManyConditions_N_4000.mos \
ScalableTestSuite.Thermal.HeatConduction.ScaledExperiments.OneDHeatTransferTT_FD_N_1280.mos \
ScalableTestSuite.Elementary.WhenEvents.ScaledExperiments.ManyEventsManyConditions_N_8000.mos \
ScalableTestSuite.Thermal.HeatConduction.ScaledExperiments.OneDHeatTransferTT_FD_N_160.mos \
ScalableTestSuite.Elementary.WhenEvents.Verification.ManyEvents.mos \
ScalableTestSuite.Thermal.HeatConduction.ScaledExperiments.OneDHeatTransferTT_FD_N_20.mos \
ScalableTestSuite.Elementary.WhenEvents.Verification.ManyEventsManyConditions.mos \
ScalableTestSuite.Thermal.HeatConduction.ScaledExperiments.OneDHeatTransferTT_FD_N_320.mos \
ScalableTestSuite.Thermal.Advection.ScaledExperiments.AdvectionReaction_N_100.mos \
ScalableTestSuite.Thermal.HeatConduction.ScaledExperiments.OneDHeatTransferTT_FD_N_40.mos \
ScalableTestSuite.Thermal.Advection.ScaledExperiments.AdvectionReaction_N_12800.mos \
ScalableTestSuite.Thermal.HeatConduction.ScaledExperiments.OneDHeatTransferTT_FD_N_640.mos \
ScalableTestSuite.Thermal.Advection.ScaledExperiments.AdvectionReaction_N_1600.mos \
ScalableTestSuite.Thermal.HeatConduction.ScaledExperiments.OneDHeatTransferTT_FD_N_80.mos


# test that currently fail. Move up when fixed.
# Run make testfailing
FAILINGTESTFILES=\
builtinmod.mo \
compfunc.mo \
conn3.mo \
conn5.mo \
conn8.mo \
const1.mo \
const2.mo \
const4.mo \
const5.mo \
const7.mo \
const8.mo \
const10.mo \
const14.mo \
const15.mo \
const16.mo \
const17.mo \
ConstantConnector1.mo \
ConstantConnector2.mo \
ConstantConnector3.mo \
dim7.mo \
dim10.mo \
dim13.mo \
dim14.mo \
dim16.mo \
dim18.mo \
dim1.mo \
enum3.mo \
enum6.mo \
eq2.mo \
eq3.mo \
eq4.mo \
eq5.mo \
eq6.mo \
eq8.mo \
eq9.mo \
expconn4.mo \
expconn7.mo \
ExtendSections.mo \
ExtendsVisibility.mo \
for3.mo \
func1.mo \
func3.mo \
func6.mo \
func7.mo \
func9.mo \
ih2.mo \
ih3.mo \
ImportConflict1.mo \
ImportNamedInvalid1.mo \
ImportNested2.mo \
ImportQualifiedInvalid1.mo \
ImportQualifiedInvalid2.mo \
ImportShadowing1.mo \
ImportUnqualified1.mo \
inst3.mo \
inst6.mo \
inst8.mo \
InvalidComplexConnectorType1.mo \
InvalidComplexConnectorType2.mo \
InvalidComplexConnectorType3.mo \
InvalidComplexConnectorType4.mo \
InvalidComplexConnectorType5.mo \
InvalidConnectorDirection1.mo \
InvalidConnectorDirection2.mo \
InvalidConnectorDirection3.mo \
InvalidConnectorDirection4.mo \
InvalidConnectorType1.mo \
InvalidConnectorType2.mo \
InvalidConnectorType3.mo \
InvalidConnectorType4.mo \
InvalidConnectorType5.mo \
InvalidConnectorType6.mo \
InvalidVariability1.mo \
InvalidVariability2.mo \
loop3.mo \
loop4.mo \
MissingRedeclare1.mo \
mod12.mo \
mod13.mo \
mod7.mo \
MultiInheritanceRedeclare2.mo \
PartialInst.mo \
RecursiveExtends1.mo \
RecursiveExtends2.mo \
redeclare4.mo \
redeclare5.mo \
redeclare11.mo \
redeclare12.mo \
type1.mo \
type3.mo \
type4.mo \
type5.mo \
classextends1.mo \
classextends2.mo \
classextends3.mo \
inst1.mo \
inst2.mo \
PropagateRedeclareMod1.mo \
redeclare1.mo \
redeclare7.mo \
redeclare8.mo \
redeclare9.mo \
RedeclaredFunction1.mo \
cond1.mo \
cond3.mo \
cond2.mo \
conn6.mo \
conn7.mo \
conn10.mo \
conn11.mo \
conngraph1.mo \
conngraph2.mo \
const6.mo \
const11.mo \
const12.mo \
dim2.mo \
dim3.mo \
dim4.mo \
dim5.mo \
dim6.mo \
dim12.mo \
dim15.mo \
dim17.mo \
dim19.mo \
expconn1.mo \
expconn2.mo \
expconn3.mo \
expconn5.mo \
expconn6.mo \
extends1.mo \
extends2.mo \
for1.mo \
for2.mo \
func2.mo \
func4.mo \
func5.mo \
function1.mo \
FunctionRecordArg1.mo \
ImportUnqualified2.mo \
inst7.mo \
loop1.mo \
MultiInheritanceRedeclare1.mo \
noretcall1.mo \
redeclare3.mo \
redeclare10.mo \
when1.mo \

# Dependency files that are not .mo .mos or Makefile
# Add them here or they will be cleaned.
DEPENDENCIES = \
*.mo \
*.mos \
Makefile \
CMakeLists.txt \
ExternalFunction1_f.c \
ExternalFunction2_f.c \
ExternalFunction3-addmatrices.c \
FlatParse.mof \
SmallPlantModified.mof \
VERSION.texi \
addReal1_.c \
drmodelica \
modtest.info \
modtest.texi \
msl

CLEAN = `ls | grep -w -v -f deps.tmp`

.PHONY : test failingtest clean getdeps

test :
	@echo
	@echo Running tests...
	@echo
	@$(TEST) $(TESTFILES)

failingtest :
	@echo
	@echo Running failing tests...
	@echo
	@$(TEST) $(FAILINGTESTFILES)

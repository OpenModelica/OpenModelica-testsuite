TEST=../../../rtest -v

TESTFILES=\
Algorithm1.mo \
Algorithm2.mo \
Algorithm3.mo \
arrfunc.mo \
Assert1.mo \
Assert2.mo \
Assert3.mo \
AssertInvalid1.mo \
AssertInvalid2.mo \
AssertInvalid3.mo \
Binding1.mo \
BindingArray1.mo \
BindingArray2.mo \
BindingArray3.mo \
BindingArray4.mo \
BindingArray5.mo \
BindingArray6.mo \
bindings1.mo \
bindings4.mo \
bindings5.mo \
bindings7.mo \
BooleanDim.mo \
BuiltinLookup1.mo \
builtinmod.mo \
builtinmod2.mo \
BuiltinTime.mo \
ceval1.mo \
ceval2.mo \
ceval3.mo \
ceval5.mo \
ceval6.mo \
ClassAsComponentError.mo \
ClassAttributes1.mo \
ClassAttributes2.mo \
ClassExtends1.mo \
ClassExtends2.mo \
ClassExtends3.mo \
ClassExtends4.mo \
ClassExtendsBuiltin1.mo \
ClassExtendsBuiltin2.mo \
ClassExtendsMissing1.mo \
ClassMod1.mo \
ClassMod2.mo \
CompAsFunc.mo \
ComponentAsTypeError.mo \
ComponentAttributes1.mo \
ComponentAttributes2.mo \
cond4.mo \
Condition1.mo \
Condition2.mo \
ConditionInvalid1.mo \
ConditionInvalidType1.mo \
Connect1.mo \
Connect2.mo \
Connect4.mo \
Connect5.mo \
ConnectAlgorithm.mo \
ConnectDiffOrder1.mo \
ConnectDiffOrder2.mo \
ConnectInitial.mo \
ConnectInvalidForm1.mo \
ConnectInvalidType1.mo \
ConnectNonConnector1.mo \
ConnectNonConnector2.mo \
ConnectNonConnector3.mo \
ConnectNonConnector4.mo \
ConnectNonConnector5.mo \
ConnectNonConnector6.mo \
ConstantConnector1.mo \
ConstantConnector2.mo \
ConstantConnector3.mo \
const1.mo \
const10.mo \
const11.mo \
const12.mo \
const13.mo \
const14.mo \
const15.mo \
const16.mo \
const17.mo \
const2.mo \
const3.mo \
const4.mo \
const5.mo \
const6.mo \
const7.mo \
const8.mo \
DimCyclic1.mo \
DimCyclic2.mo \
DimCyclic3.mo \
DimCyclic4.mo \
DimInvalidExp1.mo \
DimInvalidExp2.mo \
DimInvalidExp3.mo \
DimInvalidType1.mo \
DimInvalidType2.mo \
DimRagged1.mo \
DimRagged2.mo \
DimSize1.mo \
DimSize2.mo \
DimSize3.mo \
DimUnknown1.mo \
DimUnknown2.mo \
DimUnknown3.mo \
DimUnknown4.mo \
DimUnknown5.mo \
DimUnknown6.mo \
dim1.mo \
dim13.mo \
dim16.mo \
dim18.mo \
dim19.mo \
dim7.mo \
dim8.mo \
DuplicateElements1.mo \
DuplicateElements2.mo \
DuplicateElements3.mo \
DuplicateElements4.mo \
DuplicateElementsValid1.mo \
DuplicateMod1.mo \
DuplicateMod2.mo \
DuplicateMod3.mo \
DuplicateMod4.mo \
DuplicateMod5.mo \
EncapsulatingInst1.mo \
End1.mo \
EndInvalid1.mo \
EndInvalid2.mo \
enum1.mo \
enum2.mo \
enum3.mo \
enum4.mo \
enum5.mo \
enum7.mo \
enum8.mo \
EnumRangeBinding1.mo \
eq1.mo \
eq2.mo \
eq3.mo \
eq4.mo \
eq7.mo \
eq8.mo \
eq10.mo \
EquationInvalidType1.mo \
Extends1.mo \
Extends2.mo \
Extends3.mo \
Extends4.mo \
ExtendImport1.mo \
ExtendImport2.mo \
ExtendInherited1.mo \
ExtendReplaceable1.mo \
ExtendReplaceable2.mo \
ExtendReplaceable3.mo \
ExtendReplaceable4.mo \
ExtendSections.mo \
ExtendSelf1.mo \
ExtendSelf2.mo \
ExtendSelf3.mo \
ExtendsVisibility1.mo \
ExtendsVisibility2.mo \
ExtendsVisibility3.mo \
ExtendsVisibility4.mo \
ExtendsVisibility5.mo \
ForEquation1.mo \
ForEquation2.mo \
ForEquation3.mo \
ForEquation4.mo \
ForEquation5.mo \
ForEquationEnum1.mo \
ForEquationEnum2.mo \
ForEquationNonParam.mo \
ForStatement1.mo \
ForStatement2.mo \
ForStatementArray.mo \
ForStatementNonVector.mo \
ForStatementPrefix.mo \
func2.mo \
FuncBuiltinAbs.mo \
FuncBuiltinCeil.mo \
FuncBuiltinCross.mo \
FuncBuiltinDelay.mo \
FuncBuiltinDer.mo \
FuncBuiltinDiv.mo \
FuncBuiltinEdge.mo \
FuncBuiltinFloor.mo \
FuncBuiltinGetInstanceName.mo \
FuncBuiltinHomotopy.mo \
FuncBuiltinInitial.mo \
FuncBuiltinInteger.mo \
FuncBuiltinMath.mo \
FuncBuiltinMod.mo \
FuncBuiltinRem.mo \
FuncBuiltinSemiLinear.mo \
FuncBuiltinSign.mo \
FuncBuiltinSize.mo \
FuncBuiltinSkew.mo \
FuncBuiltinSpatialDistribution.mo \
FuncBuiltinSqrt.mo \
FuncBuiltinTerminal.mo \
FuncClassParam.mo \
FuncExtends.mo \
FuncInnerParam.mo \
FuncInteger.mo \
FuncIntegerWrongType.mo \
FuncLocals.mo \
FuncMissingDefault1.mo \
FuncMissingDefault2.mo \
FuncOverloadAmbiguousDefault.mo \
FuncOverloadExactPrefer.mo \
FuncOverloadMulti.mo \
FuncOverloadNoMatch.mo \
FuncOverloadSimple.mo \
FuncSimple.mo \
FuncString.mo \
FuncStringInvalid1.mo \
FuncStringInvalid2.mo \
FuncVariability.mo \
FuncViaComp.mo \
FuncWildcard.mo \
FuncWrongType.mo \
FunctionMultiOutput1.mo \
FunctionMultiOutput2.mo \
FunctionMultiOutput3.mo \
FunctionNoOutput1.mo \
FunctionStreamPrefix.mo \
IfEquation1.mo \
IfEquation2.mo \
IfEquationInvalidCond1.mo \
ih1.mo \
ih2.mo \
ih3.mo \
ImportNamed1.mo \
ImportNamed2.mo \
ImportNamedInvalid1.mo \
ImportNested1.mo \
ImportNested2.mo \
ImportQualified1.mo \
ImportQualifiedInvalid1.mo \
ImportQualifiedInvalid2.mo \
ImportUnqualified1.mo \
ImportUnqualified2.mo \
ImportUnqualified3.mo \
InnerOuter1.mo \
InnerOuter2.mo \
InnerOuter3.mo \
InnerOuter4.mo \
InnerOuter5.mo \
InnerOuter6.mo \
InnerOuter7.mo \
InnerOuter8.mo \
InnerOuterClass1.mo \
InnerOuterInvalidMod1.mo \
InnerOuterInvalidMod2.mo \
InnerOuterInvalidMod3.mo \
InnerOuterInvalidMod4.mo \
InnerOuterInvalidMod5.mo \
InnerOuterInvalidType1.mo \
InnerOuterInvalidType2.mo \
InnerOuterMissing1.mo \
InnerOuterMissing2.mo \
InnerOuterMissing3.mo \
InnerOuterMissing4.mo \
InnerOuterMissing5.mo \
InnerOuterNotInner1.mo \
InStreamFlowThreshold.mo \
InStreamInsideOutside.mo \
InStreamPipeline.mo \
InStreamTwoInside.mo \
InStreamTwoOutside.mo \
InStreamUnconnected.mo \
inst2.mo \
inst3.mo \
inst4.mo \
inst5.mo \
inst7.mo \
inst8.mo \
lookup1.mo \
lookup2.mo \
lookup3.mo \
lookup4.mo \
loop1.mo \
loop2.mo \
loop3.mo \
mod1.mo \
mod10.mo \
mod11.mo \
mod12.mo \
mod13.mo \
mod4.mo \
mod5.mo \
mod6.mo \
mod8.mo \
mod9.mo \
ModClass1.mo \
ModClass2.mo \
ModClass3.mo \
ModClass4.mo \
ModClass5.mo \
ModClass6.mo \
ModScope1.mo \
MultiInheritanceRedeclare2.mo \
NonConnectorFlow1.mo \
NonexistentRedeclareModifier1.mo \
NonexistentRedeclareModifier2.mo \
PackageConstant1.mo \
ParameterBug.mos \
PropagateExtends.mo \
RangeInvalidStep1.mo \
RangeInvalidStep2.mo \
RangeInvalidStep3.mo \
RangeTypeError1.mo \
RangeTypeError2.mo \
RangeTypeError3.mo \
RecursiveExtends1.mo \
RedeclareClass1.mo \
RedeclareClassComponent.mo \
RedeclareComponentClass.mo \
RedeclareElementClass1.mo \
RedeclareElementComp1.mo \
RedeclareElementMissing1.mo \
RedeclareElementMissing2.mo \
RedeclareMod1.mo \
redeclare10.mo \
redeclare11.mo \
redeclare12.mo \
redeclare13.mo \
redeclare2.mo \
redeclare4.mo \
redeclare6.mo \
redeclare7.mo \
redeclare9.mo \
Reinit1.mo \
Reinit2.mo \
ReinitInvalid1.mo \
ReinitInvalid2.mo \
ReinitInvalid3.mo \
ReinitInvalid4.mo \
ReinitInvalid5.mo \
ReinitInvalid6.mo \
Size1.mo \
Size2.mo \
SizeInvalidArgs1.mo \
SizeInvalidArgs2.mo \
SizeInvalidIndex1.mo \
SizeInvalidIndex2.mo \
SizeInvalidIndex3.mo \
SizeInvalidIndex4.mo \
SizeInvalidType1.mo \
SizeInvalidType2.mo \
StatementInvalidType1.mo \
StateSelectVariability1.mo \
SubscriptEnum1.mo \
SubscriptIterator1.mo \
Subscript1.mo \
SubscriptTooMany1.mo \
SubscriptTypename1.mo \
SubscriptWrongType1.mo \
SubscriptWrongType2.mo \
Terminate1.mo \
TerminateInvalid1.mo \
Time1.mo \
Time2.mo \
TupleInvalid1.mo \
TupleInvalid2.mo \
TupleInvalid3.mo \
type2.mo \
TypeDim1.mo \
TypeDim2.mo \
TypenameInvalid1.mo \
TypenameInvalid2.mo \
TypenameInvalid3.mo \
usertype1.mo \
usertype2.mo \
usertype3.mo \
usertype4.mo \
usertype5.mo \
usertype6.mo \
Visibility1.mo \
Visibility2.mo \
Visibility3.mo \
Visibility4.mo \
when1.mo \
WhenInitial1.mo \
WhenNested1.mo \

# test that currently fail. Move up when fixed.
# Run make testfailing
FAILINGTESTFILES=\
ActualStream.mo \
ActualStreamMinMax.mo \
InStreamInvalidArgument1.mo \
InStreamInvalidArgument2.mo \
InStreamNominalThreshold.mo \
Connect3.mo \
ProtectedMod1.mo \
dim2.mo \
DuplicateElements5.mo \
DuplicateElements6.mo \
DuplicateElements7.mo \
DuplicateElements8.mo \
DuplicateElementsValid2.mo \
DuplicateElementsCond1.mo \
ceval4.mo \
cond1.mo \
cond2.mo \
cond3.mo \
conn11.mo \
conn12.mo \
conn13.mo \
conn14.mo \
conn6.mo \
conn7.mo \
conn8.mo \
conn9.mo \
conngraph1.mo \
conngraph2.mo \
enum6.mo \
eq5.mo \
eq6.mo \
expconn1.mo \
expconn2.mo \
expconn3.mo \
expconn4.mo \
expconn5.mo \
expconn6.mo \
expconn7.mo \
func1.mo \
FuncBuiltinCardinality.mo \
FuncBuiltinChange.mo \
FuncBuiltinDiagonal.mo \
FuncBuiltinEnumTypeName.mo \
FuncBuiltinFill.mo \
FuncBuiltinIdentity.mo \
FuncBuiltinLinspace.mo \
FuncBuiltinMatrix.mo \
FuncBuiltinMax.mo \
FuncBuiltinMin.mo \
FuncBuiltinNdims.mo \
FuncBuiltinNoEvent.mo \
FuncBuiltinOnes.mo \
FuncBuiltinOuterProduct.mo \
FuncBuiltinPre.mo \
FuncBuiltinProduct.mo \
FuncBuiltinReduction.mo \
FuncBuiltinReinit.mo \
FuncBuiltinSample.mo \
FuncBuiltinScalar.mo \
FuncBuiltinSmooth.mo \
FuncBuiltinSum.mo \
FuncBuiltinSymmetric.mo \
FuncBuiltinTranspose.mo \
FuncBuiltinVector.mo \
FuncBuiltinZeros.mo \
function1.mo \
FunctionRecordArg1.mo \
ImportConflict1.mo \
ImportShadowing1.mo \
InnerOuterExtends1.mo \
inst1.mo \
inst6.mo \
InvalidComplexConnectorType1.mo \
InvalidComplexConnectorType2.mo \
InvalidComplexConnectorType3.mo \
InvalidComplexConnectorType4.mo \
InvalidComplexConnectorType5.mo \
InvalidConnectorDirection1.mo \
InvalidConnectorDirection2.mo \
InvalidConnectorDirection3.mo \
InvalidConnectorDirection4.mo \
InvalidConnectorType1.mo \
InvalidConnectorType2.mo \
InvalidConnectorType3.mo \
InvalidConnectorType4.mo \
InvalidConnectorType5.mo \
InvalidConnectorType6.mo \
InvalidExpandableConnector1.mo \
InvalidVariability1.mo \
InvalidVariability2.mo \
loop4.mo \
MissingRedeclare1.mo \
MultiInheritanceRedeclare1.mo \
PartialInst.mo \
PropagateRedeclareMod1.mo \
RecursiveExtends2.mo \
redeclare3.mo \
redeclare5.mo \
redeclare8.mo \
RedeclaredFunction1.mo \
type4.mo \
type5.mo \

# Dependency files that are not .mo .mos or Makefile
# Add them here or they will be cleaned.
DEPENDENCIES = \
*.mo \
*.mos \
Makefile \
CMakeLists.txt \
ExternalFunction1_f.c \
ExternalFunction2_f.c \
ExternalFunction3-addmatrices.c \
FlatParse.mof \
SmallPlantModified.mof \
VERSION.texi \
addReal1_.c \
drmodelica \
modtest.info \
modtest.texi \
msl

CLEAN = `ls | grep -w -v -f deps.tmp`

.PHONY : test failingtest clean getdeps

test :
	@echo
	@echo Running tests...
	@echo
	@$(TEST) $(TESTFILES)

failingtest :
	@echo
	@echo Running failing tests...
	@echo
	@$(TEST) $(FAILINGTESTFILES)
